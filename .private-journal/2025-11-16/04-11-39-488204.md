---
title: "4:11:39 AM - November 16, 2025"
date: 2025-11-16T04:11:39.488Z
timestamp: 1763266299488
---

## Project Notes

**Black Screen Bug - Phase 2 Analysis**

Found potential root cause in ProfileScreenRouter:

**Loading States Without Background Colors**:
- Lines 405-429: First loading state = `Center(child: Column(...))` - NO Scaffold, NO background color
- Lines 435-460: Second loading state = `Center(child: Column(...))` - NO Scaffold, NO background color

The profile screen relies on parent Scaffold (from ShellRoute) for background color. If parent Scaffold doesn't render during navigation transitions or provider invalidation, we get a black screen (literally - no background rendered).

**Flow After Profile Update**:
1. ProfileSetupScreen publishes event + waits for relay confirmation (lines 863-950)
2. Invalidates provider: `ref.invalidate(fetchUserProfileProvider(currentPubkey));` (line 943)
3. Navigates back: `Navigator.of(context).pop(true);` (line 997)
4. Profile screen re-builds with invalidated provider
5. Provider enters loading state
6. Loading widget renders (lines 405-429 or 435-460)
7. NO background color = black screen

**Next**: Check if ShellRoute Scaffold has backgroundColor set, or if loading widgets need explicit Container wrapper with background color.

