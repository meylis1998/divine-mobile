{
  "embedding": [
    -0.09522094577550888,
    -0.041307106614112854,
    -0.041852906346321106,
    -0.10901413857936859,
    0.024921555072069168,
    -0.04450641945004463,
    -0.002307254821062088,
    -0.04748259484767914,
    -0.009210404939949512,
    0.021385692059993744,
    -0.012096881866455078,
    0.01176238339394331,
    0.009152121841907501,
    0.04472622275352478,
    -0.0011579267447814345,
    0.021260980516672134,
    0.07394230365753174,
    -0.11269327253103256,
    -0.051955923438072205,
    0.041515130549669266,
    -0.005817041732370853,
    -0.036205507814884186,
    0.03253016248345375,
    0.04954246059060097,
    0.04423803091049194,
    -0.0642274022102356,
    -0.005032505374401808,
    -0.08825390040874481,
    -0.04387886822223663,
    0.006476868409663439,
    0.0346197709441185,
    0.012744205072522163,
    -0.07973338663578033,
    -0.03780970722436905,
    -0.03033130057156086,
    0.008066513575613499,
    -0.022314876317977905,
    0.0127545315772295,
    -0.1112627387046814,
    -0.06338666379451752,
    0.051297836005687714,
    -0.00058751180768013,
    -0.08233943581581116,
    0.017976682633161545,
    -0.007818861864507198,
    -0.024129437282681465,
    0.04903797060251236,
    -0.009277918376028538,
    0.056207120418548584,
    0.011058961041271687,
    -0.028481876477599144,
    0.12093281000852585,
    0.005318086128681898,
    0.005248296074569225,
    0.035914357751607895,
    0.028271431103348732,
    0.06841021776199341,
    0.06665661931037903,
    0.004361841827630997,
    0.005048813298344612,
    0.011631686240434647,
    0.001848832587711513,
    -0.015292021445930004,
    -0.00013509033306036144,
    0.027009248733520508,
    0.05152107775211334,
    0.0031605667900294065,
    -0.03393501788377762,
    0.06760818511247635,
    -0.009929667226970196,
    -0.04907375946640968,
    0.0436088964343071,
    0.025071091949939728,
    0.0018200483173131943,
    0.015170905739068985,
    -0.005848149303346872,
    0.025940949097275734,
    -0.045270685106515884,
    0.0034823480527848005,
    -0.12092413008213043,
    -0.06971365213394165,
    -0.041152920573949814,
    0.015225606970489025,
    0.06369233876466751,
    0.04259319230914116,
    -0.00864503812044859,
    -0.00024050756474025548,
    -0.04205169528722763,
    0.03235054016113281,
    0.06828675419092178,
    0.05112379789352417,
    0.09601441025733948,
    -0.0537758469581604,
    0.004110796842724085,
    0.06846672296524048,
    -0.014345433562994003,
    0.04734351113438606,
    0.037808533757925034,
    -0.1399175375699997,
    0.028003020212054253,
    0.008869878947734833,
    -0.0026913511101156473,
    0.04476550593972206,
    0.09303310513496399,
    0.038003768771886826,
    -0.04206877574324608,
    0.010485958307981491,
    -0.03727112337946892,
    -0.07474926859140396,
    -0.0037484716158360243,
    0.03722421079874039,
    -0.03943348303437233,
    0.053760040551424026,
    0.0252310149371624,
    0.0254400335252285,
    0.04545389860868454,
    -0.03417396545410156,
    0.000608738511800766,
    0.02654941938817501,
    0.028636803850531578,
    0.09450449049472809,
    -0.010026865638792515,
    0.0730850100517273,
    -0.07987144589424133,
    0.03990660607814789,
    0.006512442138046026,
    0.030439535155892372,
    7.248778484525763e-33,
    -0.017182277515530586,
    -0.06397999078035355,
    0.018459860235452652,
    0.07475776970386505,
    -0.0014848995488137007,
    0.015063443221151829,
    -0.038481347262859344,
    0.01775108091533184,
    0.024895116686820984,
    -0.03522300720214844,
    0.030198445543646812,
    -0.03891759738326073,
    0.04711411893367767,
    -0.05193997919559479,
    0.04052268713712692,
    -0.08203867077827454,
    0.047790657728910446,
    -0.029538094997406006,
    0.00955189485102892,
    0.03998972848057747,
    0.06055346876382828,
    -0.05047023296356201,
    -0.04060598090291023,
    -0.04992595314979553,
    -0.04372122883796692,
    0.003454851219430566,
    -0.0060394639149308205,
    0.03308412432670593,
    -0.06239303573966026,
    0.04104571416974068,
    -0.029033305123448372,
    -0.03138205409049988,
    0.048644524067640305,
    0.024295084178447723,
    -0.028175445273518562,
    -0.09347070753574371,
    0.040972426533699036,
    -0.07831770181655884,
    -0.055960990488529205,
    -0.09973572194576263,
    -0.08276359736919403,
    -0.020626943558454514,
    -0.06108556687831879,
    0.033944569528102875,
    -0.02652989886701107,
    -0.11313655227422714,
    -0.051353685557842255,
    0.03700203448534012,
    0.028043674305081367,
    0.09344392269849777,
    -0.009326242841780186,
    0.013851305469870567,
    0.006136197596788406,
    -0.12520261108875275,
    -0.0720260888338089,
    0.008645141497254372,
    0.02351149171590805,
    -0.050727080553770065,
    -0.024077165871858597,
    -0.0733293816447258,
    -0.008632333017885685,
    -0.010574611835181713,
    -0.049993377178907394,
    -0.010125597938895226,
    0.044942706823349,
    -0.007139935158193111,
    -0.050974372774362564,
    -0.0008157648844644427,
    -0.032228983938694,
    -0.028402315452694893,
    -0.07911278307437897,
    -0.0014782254584133625,
    0.06518270075321198,
    0.03992440924048424,
    0.026522360742092133,
    0.02814440242946148,
    0.040859404951334,
    0.018460460007190704,
    -0.10805856436491013,
    -0.03257164731621742,
    0.03558634594082832,
    -0.04045875370502472,
    -0.03013748675584793,
    -0.023102564737200737,
    -0.02211908809840679,
    -0.019251324236392975,
    0.00827193446457386,
    -0.04812908545136452,
    -0.06485109776258469,
    0.06367746740579605,
    0.07560189813375473,
    0.020508063957095146,
    0.11799000203609467,
    0.02151176892220974,
    -0.0845160186290741,
    -9.042039932427288e-33,
    -0.0452275350689888,
    -0.07795099914073944,
    -0.08095718920230865,
    0.02756565436720848,
    0.141668438911438,
    -0.0003205319226253778,
    -0.03510375693440437,
    0.057062190026044846,
    0.0036648372188210487,
    -0.12606129050254822,
    -0.05348958075046539,
    0.09971846640110016,
    -0.04775247722864151,
    0.07596231997013092,
    -0.025289371609687805,
    0.055937718600034714,
    0.06594425439834595,
    0.0062716444954276085,
    -0.006144342012703419,
    0.03503793105483055,
    0.07541873306035995,
    0.08868763595819473,
    -0.022138571366667747,
    0.03344203159213066,
    0.006307407282292843,
    0.03254912048578262,
    0.023848766461014748,
    0.048184338957071304,
    0.02381807006895542,
    -0.026069477200508118,
    0.12036143988370895,
    0.03933987393975258,
    -0.022881783545017242,
    0.07092247158288956,
    -0.016022955998778343,
    -0.001003712648525834,
    0.06382306665182114,
    0.006790089420974255,
    -0.09374720603227615,
    -0.030808905139565468,
    0.11902516335248947,
    0.009184337221086025,
    -0.02835531160235405,
    -0.018989743664860725,
    0.04000172019004822,
    -0.023926660418510437,
    0.030418379232287407,
    0.0017769611440598965,
    -0.11324746906757355,
    0.02633228525519371,
    0.041884902864694595,
    -0.004276552703231573,
    0.08693796396255493,
    0.0460810624063015,
    0.030922463163733482,
    0.03456674516201019,
    0.0699327141046524,
    -0.005682329181581736,
    0.06693645566701889,
    -0.04901764169335365,
    0.03851061686873436,
    -0.03186213597655296,
    -0.03608669340610504,
    -0.02793283946812153,
    0.02278244122862816,
    -0.020377634093165398,
    0.005000703502446413,
    0.09713567048311234,
    0.08449878543615341,
    -0.007655940484255552,
    0.013517187908291817,
    -0.03803185746073723,
    -0.06546729058027267,
    -0.013566181994974613,
    0.031238485127687454,
    0.0787358507514,
    0.03640725091099739,
    -0.11356077343225479,
    -0.01652299240231514,
    0.00017161291907541454,
    -0.09527681022882462,
    -0.025050431489944458,
    0.003153885481879115,
    -0.06296759843826294,
    0.0039054800290614367,
    -0.057091787457466125,
    -0.05378330498933792,
    0.0836510956287384,
    0.06995519250631332,
    0.012840737588703632,
    -0.007448964286595583,
    -0.013288892805576324,
    -0.048251695930957794,
    0.029137127101421356,
    0.033111438155174255,
    -5.7294801791840655e-8,
    0.022287245839834213,
    0.0008949274779297411,
    -0.020546087995171547,
    0.016145173460245132,
    0.0408710278570652,
    -0.015000461600720882,
    0.0527864433825016,
    -0.10883614420890808,
    -0.015916751697659492,
    -0.05590924248099327,
    -0.018858851864933968,
    0.02433887869119644,
    -0.020495731383562088,
    -0.09757354110479355,
    0.07231561839580536,
    -0.033759746700525284,
    -0.03469137102365494,
    0.004073720891028643,
    -0.08763048052787781,
    -0.03270486742258072,
    -0.02063373103737831,
    -0.0346762016415596,
    -0.11014372110366821,
    -0.03212674334645271,
    -0.08248057961463928,
    0.0007304207538254559,
    0.04586588218808174,
    -0.02350488491356373,
    0.0008433953626081347,
    -0.03189670667052269,
    -0.09016962349414825,
    0.041917745023965836,
    0.0015889195492491126,
    -0.09409312158823013,
    -0.14701604843139648,
    0.05468115955591202,
    0.06077876314520836,
    -0.01468234695494175,
    0.15007901191711426,
    0.02745213732123375,
    0.007693864870816469,
    0.02748187817633152,
    0.02000816911458969,
    -0.01886426843702793,
    -0.01693454384803772,
    0.01264085154980421,
    -0.027931418269872665,
    0.01743493415415287,
    0.05826608091592789,
    -0.06837422400712967,
    -0.04754965007305145,
    0.007534184958785772,
    -0.0647948607802391,
    -0.0017165961908176541,
    0.025083255022764206,
    0.005966430529952049,
    0.01845618709921837,
    -0.049564771354198456,
    0.07555563747882843,
    0.02496780827641487,
    0.04787911847233772,
    -0.028126411139965057,
    0.033942241221666336,
    -0.011160534806549549
  ],
  "text": "**CRITICAL BUG FOUND**: Loading screen hangs due to `addPostFrameCallback` deadlock in AuthService\n\n**Root Cause**:\nIn `auth_service.dart` `_checkExistingAuth()` method:\n- Lines 531-532, 547-549, 554-556: Wraps `_setAuthState()` calls in `addPostFrameCallback`\n- If auth initialization fails, state change to `unauthenticated` is deferred until next frame\n- BUT welcome screen shows CircularProgressIndicator while in `checking` or `authenticating` states\n- If loading spinner is shown, no frames may be rendered, so callback never fires\n- Result: User stuck on loading screen indefinitely\n\n**Why This Happens**:\n1. App starts, authService.initialize() sets state to `checking`\n2. Welcome screen watches authStateStreamProvider, gets `checking`, shows spinner\n3. _checkExistingAuth() runs, if createNewIdentity() fails, tries to set `unauthenticated` via addPostFrameCallback\n4. But since spinner is blocking frame renders, callback never executes\n5. Stream never emits new state, welcome screen stuck showing loading spinner forever\n\n**The Fix**:\nRemove `addPostFrameCallback` wrappers in _checkExistingAuth() error handlers (lines 547-549, 554-556) and line 531-532 (redundant since createNewIdentity calls it immediately anyway). Set auth state synchronously.\n\n**Files Affected**:\n- mobile/lib/services/auth_service.dart (lines 530-556)",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1763062860443,
  "path": "/Users/rabble/code/andotherstuff/openvine/.private-journal/2025-11-13/19-41-00-443208.md"
}