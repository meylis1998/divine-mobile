---
title: "10:21:46 PM - November 13, 2025"
date: 2025-11-13T22:21:46.664Z
timestamp: 1763072506664
---

## Project Notes

**Bug Fixed: Black Screen After Bug Report Submission**

**Issue**: Users experienced black screen after submitting bug report via email and returning to app.

**Root Cause**: Navigation timing race condition in `vine_drawer.dart`:
- `Navigator.pop(context)` closed drawer
- `showDialog(context: context)` executed immediately with same context
- Dialog modal barrier attached to navigator being removed
- When user returned from Mail app, invisible barrier blocked all touches

**Solution Implemented**:
1. Bug Report dialog: Use `WidgetsBinding.instance.addPostFrameCallback()` to wait for drawer animation
2. Save Logs: Use `await Future.delayed(Duration(milliseconds: 300))` before showing snackbar
3. Both approaches properly check `context.mounted` before showing UI

**Files Changed**:
- `mobile/lib/widgets/vine_drawer.dart` (lines 187-248)

**Testing Strategy**:
Manual testing required:
1. Open drawer → Report a Bug
2. Fill description → Send Report  
3. Choose Mail → Send email
4. Return to app
5. Verify: No black screen, can interact with UI normally

**Pattern for Future Reference**:
```dart
Navigator.pop(context);
WidgetsBinding.instance.addPostFrameCallback((_) {
  if (!context.mounted) return;
  showDialog(context: context, ...);
});
```
