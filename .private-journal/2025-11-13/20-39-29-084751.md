---
title: "8:39:29 PM - November 13, 2025"
date: 2025-11-13T20:39:29.084Z
timestamp: 1763066369084
---

## Project Notes

Fixed camera preview distortion issue in OpenVine:

**Problem**: Camera preview was displaying with weird distortions - stretching/squashing the image.

**Root Cause**: Camera screen was using a hardcoded 3:4 aspect ratio assumption for all cameras (`universal_camera_screen_pure.dart:553`). The actual camera sensors have different aspect ratios depending on the device, and forcing them into 3:4 caused distortion.

**Solution**:

1. **Added `cameraPreviewAspectRatio` getter to VineRecordingNotifier** (`vine_recording_provider.dart:132-145`):
   - Accesses the MobileCameraInterface to get actual camera controller
   - Reads `controller.value.aspectRatio` for the real camera sensor aspect ratio
   - Falls back to 3:4 only when camera not initialized or on macOS/web

2. **Added `controller` getter to MobileCameraInterface** (`vine_recording_controller.dart:476`):
   - Exposes the private `_controller` field publicly
   - Allows provider to access the CameraController's aspect ratio

3. **Updated camera screen to use actual aspect ratio** (`universal_camera_screen_pure.dart:552`):
   - Changed from hardcoded `3.0 / 4.0` to `ref.read(vineRecordingProvider.notifier).cameraPreviewAspectRatio`
   - Now uses the real camera sensor aspect ratio dynamically

**Result**: Camera preview now renders without distortion because it uses the actual camera sensor's aspect ratio instead of assuming 3:4 for all devices.

**Key Learning**: Never hardcode aspect ratios for camera previews. Always get the actual camera sensor's aspect ratio from the CameraController to prevent distortion. Different devices have different camera sensors with different native aspect ratios.
