{
  "embedding": [
    -0.05393197387456894,
    -0.020449187606573105,
    0.04364922642707825,
    -0.1097279042005539,
    0.06430629640817642,
    -0.03669833019375801,
    -0.014601770788431168,
    -0.027159960940480232,
    -0.08926531672477722,
    0.0525660514831543,
    0.029373854398727417,
    -0.006071560550481081,
    -0.01828988641500473,
    -0.012949390336871147,
    0.041274551302194595,
    0.04806239530444145,
    0.0541115328669548,
    -0.050403524190187454,
    -0.02744324505329132,
    0.059126514941453934,
    -0.02641800045967102,
    -0.029267901554703712,
    0.038739293813705444,
    0.023301472887396812,
    -0.009774785488843918,
    -0.04482448846101761,
    0.031019974499940872,
    -0.050150152295827866,
    -0.04075910523533821,
    -0.004184674005955458,
    0.01919548027217388,
    0.059870749711990356,
    -0.0693981945514679,
    0.010027789510786533,
    -0.013305526226758957,
    0.02931860275566578,
    -0.06069808080792427,
    0.0024580778554081917,
    -0.05702501907944679,
    -0.06072442978620529,
    0.027529362589120865,
    0.02424638718366623,
    -0.07947696000337601,
    0.05640263482928276,
    -0.00037287938175722957,
    -0.08372148871421814,
    0.05245748534798622,
    -0.0363423116505146,
    -0.019390316680073738,
    -0.0061413380317389965,
    0.062473222613334656,
    0.01648295670747757,
    0.015400060452520847,
    -0.018400296568870544,
    0.06618218123912811,
    0.012191125191748142,
    -0.01394130103290081,
    0.10583999007940292,
    0.006961997132748365,
    0.05409854277968407,
    0.04762677475810051,
    -0.03515591844916344,
    -0.032665353268384933,
    -0.049201931804418564,
    -0.04923912137746811,
    0.07347780466079712,
    0.11355199664831161,
    -0.026719244197010994,
    0.07551954686641693,
    0.02229985035955906,
    -0.02870100364089012,
    0.06312093883752823,
    0.04978511855006218,
    -0.01260056346654892,
    -0.01883513107895851,
    0.04519728571176529,
    0.006068249233067036,
    0.02084142528474331,
    -0.044823721051216125,
    -0.12708336114883423,
    -0.030996764078736305,
    -0.024092230945825577,
    -0.0206650048494339,
    0.029679032042622566,
    0.013287399895489216,
    -0.029090939089655876,
    0.007823505438864231,
    -0.02558383345603943,
    0.05927525833249092,
    0.06591065227985382,
    0.059158168733119965,
    0.0356326587498188,
    0.021342245861887932,
    -0.015213776379823685,
    0.0047026826068758965,
    -0.013738722540438175,
    -0.027913879603147507,
    -0.020834211260080338,
    -0.08648405224084854,
    0.025320498272776604,
    -0.04825318604707718,
    0.016549251973628998,
    0.033062346279621124,
    0.08399856835603714,
    -0.01112386491149664,
    -0.024630045518279076,
    0.03230257332324982,
    -0.018118206411600113,
    -0.056919604539871216,
    0.022851524874567986,
    0.01932070218026638,
    -0.016795668751001358,
    0.02650999091565609,
    0.028293941169977188,
    0.010686318390071392,
    0.01127670519053936,
    -0.046373311430215836,
    -0.016560297459363937,
    0.027353506535291672,
    0.05116010829806328,
    0.02737453579902649,
    0.010393531993031502,
    0.05018221586942673,
    -0.04309394955635071,
    -0.028505384922027588,
    0.03218567743897438,
    -0.012513427063822746,
    4.9795909653869726e-33,
    0.03807676210999489,
    -0.05209885165095329,
    -0.03215703368186951,
    0.021342404186725616,
    -0.03577772155404091,
    -0.04790208861231804,
    -0.026404011994600296,
    0.03846375271677971,
    -0.018789246678352356,
    -0.12837448716163635,
    -0.017511658370494843,
    -0.025078060105443,
    -0.03227820247411728,
    -0.04483158141374588,
    0.07014630734920502,
    -0.054561883211135864,
    -0.03609606251120567,
    0.01309451274573803,
    0.034288760274648666,
    0.09727001190185547,
    0.028198862448334694,
    -0.10085797309875488,
    -0.047026798129081726,
    -0.08819624781608582,
    -0.019095292314887047,
    -0.006328810937702656,
    0.07192995399236679,
    0.009662173688411713,
    0.008250311017036438,
    0.012999050319194794,
    -0.059515081346035004,
    -0.041253019124269485,
    0.06959027796983719,
    0.03959329053759575,
    -0.06459613144397736,
    -0.0703081339597702,
    -0.05041404813528061,
    -0.015303637832403183,
    -0.0375605970621109,
    -0.04978911578655243,
    -0.09276524931192398,
    -0.004488546866923571,
    -0.07173734158277512,
    0.001205821754410863,
    0.08268482983112335,
    -0.08679714053869247,
    -0.08524341881275177,
    -0.001038325484842062,
    0.05656009539961815,
    0.042149998247623444,
    -0.0017785490490496159,
    0.008728822693228722,
    0.018707897514104843,
    -0.09959454089403152,
    -0.04360255226492882,
    -0.028705034404993057,
    -0.02109569124877453,
    0.008270247839391232,
    0.01609071157872677,
    0.020233875140547752,
    -0.004265727009624243,
    0.019140133634209633,
    -0.017442788928747177,
    0.00233930884860456,
    0.029804937541484833,
    0.06254667788743973,
    -0.1314028948545456,
    0.006927253678441048,
    -0.047440946102142334,
    -0.018399817869067192,
    -0.03502127528190613,
    -0.02985954098403454,
    0.0798918753862381,
    0.036761149764060974,
    -0.020926902070641518,
    0.0235846359282732,
    -0.015876220539212227,
    -0.011245942674577236,
    -0.13187740743160248,
    -0.0053268619813025,
    -0.025812309235334396,
    0.0322888121008873,
    -0.008311576209962368,
    0.014821688644587994,
    -0.020433591678738594,
    -0.04149915277957916,
    0.05761096626520157,
    -0.05522318556904793,
    -0.04525211825966835,
    0.06814081966876984,
    0.028149735182523727,
    0.0478973314166069,
    0.014889323152601719,
    0.008866234682500362,
    -0.03299475461244583,
    -6.239140509132746e-33,
    -0.0394662544131279,
    -0.048477668315172195,
    -0.022875521332025528,
    0.018878743052482605,
    0.046781186014413834,
    -0.020759304985404015,
    -0.043205443769693375,
    0.025641117244958878,
    0.024661684408783913,
    -0.07137539982795715,
    -0.07583974301815033,
    0.07575786858797073,
    0.032791122794151306,
    -0.044287391006946564,
    -0.034017857164144516,
    0.03534764423966408,
    0.00822504237294197,
    -0.051129233092069626,
    0.051803119480609894,
    -0.030947433784604073,
    0.03098137117922306,
    0.10405901074409485,
    0.01960076577961445,
    0.018127238377928734,
    -0.07928676903247833,
    -0.01995382271707058,
    0.0395706407725811,
    0.04298889636993408,
    0.012251589447259903,
    -0.03247308358550072,
    0.1637386530637741,
    0.02158472128212452,
    -0.024793697521090508,
    0.03286702558398247,
    0.038194503635168076,
    -0.011862926185131073,
    0.02186058647930622,
    -0.012365601025521755,
    -0.07741787284612656,
    -0.09421325474977493,
    0.13174566626548767,
    -0.008664701133966446,
    -0.022577833384275436,
    -0.03092123381793499,
    0.06316355615854263,
    -0.01708834245800972,
    0.049874793738126755,
    -0.03596707060933113,
    -0.058174971491098404,
    -0.064557746052742,
    0.06647638976573944,
    0.0024285209365189075,
    -0.004307018127292395,
    -0.00868395995348692,
    0.02407873049378395,
    0.04234084114432335,
    0.08700238168239594,
    0.015099361538887024,
    0.021996021270751953,
    0.011386595666408539,
    0.07614415138959885,
    -0.043001241981983185,
    -0.018601782619953156,
    0.012900224886834621,
    -0.011631430126726627,
    -0.010504646226763725,
    0.102401003241539,
    0.1102801263332367,
    -0.0003254564944654703,
    0.07714919000864029,
    -0.04543169215321541,
    0.011978056281805038,
    -0.08042579889297485,
    0.006987000349909067,
    0.014526650309562683,
    0.11657098680734634,
    -0.008352774195373058,
    -0.022937214002013206,
    -0.05175469070672989,
    -0.027020452544093132,
    -0.09782624244689941,
    0.012904045172035694,
    -0.046801503747701645,
    -0.029018685221672058,
    0.04693985357880592,
    -0.051478855311870575,
    -0.049047309905290604,
    0.03824565187096596,
    0.08165380358695984,
    -0.021159762516617775,
    -0.015539026819169521,
    -0.050889067351818085,
    -0.07399473339319229,
    0.07452086359262466,
    0.009840893559157848,
    -6.417575093564665e-8,
    0.08954744786024094,
    0.0036957787815481424,
    -0.028333129361271858,
    0.03145650774240494,
    0.08798220753669739,
    -0.028905050829052925,
    0.10158160328865051,
    -0.011130751110613346,
    0.025612197816371918,
    -0.030773453414440155,
    -0.041614335030317307,
    0.010930368676781654,
    -0.1069948598742485,
    0.04946570470929146,
    0.06626817584037781,
    -0.01962970197200775,
    -0.05114248767495155,
    0.09715507924556732,
    -0.0869351327419281,
    -0.03889567032456398,
    -0.05787463113665581,
    -0.039123307913541794,
    -0.11847809702157974,
    -0.016095131635665894,
    -0.056490980088710785,
    -0.03295350447297096,
    0.04552040994167328,
    -0.05641617625951767,
    0.01794975996017456,
    -0.026931075379252434,
    -0.032843686640262604,
    -0.010557813569903374,
    0.021694641560316086,
    -0.0676281750202179,
    0.009931366890668869,
    0.07788699865341187,
    0.111800417304039,
    0.05836576595902443,
    0.1601565033197403,
    0.14010100066661835,
    -0.02823210135102272,
    -0.009572917595505714,
    0.08004011958837509,
    -0.026767730712890625,
    0.014088640920817852,
    -0.023512830957770348,
    -0.08295149356126785,
    0.013768883422017097,
    0.02603732980787754,
    0.05814822018146515,
    0.03734677657485008,
    0.029540738090872765,
    -0.1004120334982872,
    -0.06122005358338356,
    0.002951521659269929,
    0.028867360204458237,
    -0.07208825647830963,
    -0.0867953822016716,
    0.013291898183524609,
    -0.04714411869645119,
    0.11778762936592102,
    -0.041325196623802185,
    0.057023726403713226,
    0.0515359491109848
  ],
  "text": "**Symptom**: App hangs on loading screen in release APK/AAB builds, but works perfectly in debug builds and emulator\n\n**Root Cause Confirmed**: R8 bytecode optimizer was enabled (`isMinifyEnabled = true`) but proguard-rules.pro was NEVER referenced in build.gradle.kts. R8 ran with only default Android rules, aggressively stripping:\n\n1. **SharedPreferences platform channel** - Router redirect (app_router.dart:88) calls `SharedPreferences.getInstance()` to check TOS acceptance. Without platform channel, this async call hangs forever.\n2. **Flutter engine classes** - Reflection-based initialization code\n3. **Platform channel codecs** - MethodChannel, EventChannel, StandardMessageCodec\n4. **Plugin registration** - All Flutter plugins use reflection\n\n**How I Confirmed**:\n- Checked build.gradle.kts line 58: `isMinifyEnabled = true` ✓\n- Checked for proguardFiles reference: NONE ✗\n- Verified proguard-rules.pro exists but is orphaned\n- Traced router.dart redirect code that runs on every navigation\n\n**Fix Applied**:\n1. Added proguardFiles reference in build.gradle.kts release buildType\n2. Added minimal ProGuard rules to preserve:\n   - Flutter engine core (io.flutter.app.**, io.flutter.embedding.**)\n   - Platform channels (io.flutter.plugin.common.**)\n   - SharedPreferences (android.content.SharedPreferences)\n   - Firebase (com.google.firebase.**, com.google.android.gms.**)\n   - Native methods (JNI)\n\n**Avoided Over-Engineering**:\n- Did NOT keep all of androidx.** (too broad)\n- Did NOT keep JSON serialization (not using Gson)\n- Did NOT keep Lifecycle/RecyclerView (not the issue)\n\n**Next Step**: MUST test release APK on physical device to verify fix",
  "sections": [
    "Project Notes",
    "Android Loading Screen Hang - COMPLETE ROOT CAUSE ANALYSIS"
  ],
  "timestamp": 1763113811338,
  "path": "/Users/rabble/code/andotherstuff/openvine/.private-journal/2025-11-14/09-50-11-338182.md"
}