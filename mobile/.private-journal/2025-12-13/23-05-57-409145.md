---
title: "11:05:57 PM - December 13, 2025"
date: 2025-12-13T10:05:57.409Z
timestamp: 1765620357409
---

## Project Notes

## Progress Bar Double-Counting Bug Fixed

**Issue**: When user returned to camera to record more clips, progress bar showed incorrect value (too high) or went to 100%, getting stuck.

**Root Cause**: In VineRecordingController, there are two duration trackers:
- `_totalRecordedDuration` - duration recorded in current session
- `_previouslyRecordedDuration` - duration from ClipManager clips

When returning to record more:
1. User records 2s â†’ `_totalRecordedDuration = 2s`
2. Goes to ClipManager (clip saved)
3. Returns to camera
4. `setPreviouslyRecordedDuration(2s)` called but `_totalRecordedDuration` was NOT reset
5. Total = 2s + 2s = 4s (double-counted!)

**Fix**: 
1. In `setPreviouslyRecordedDuration()` - also reset `_totalRecordedDuration` to zero and clear segments
2. In `reset()` - also reset `_previouslyRecordedDuration` to zero

This ensures clean session separation between ClipManager clips and new recording.

## Text Overlay Not Being Burned Into Video

**Issue**: Text overlays added in VideoEditorScreen were shown in preview but NOT included in final uploaded video.

**Root Cause**: VideoEditorScreen's `_handleDone()` created a VineDraft with just the raw video path, ignoring the textOverlays from editorState.

VideoExportService has `export()` method that supports text overlays (renders to PNG, composites via FFmpeg), but it was never called. ClipManager only called `concatenateSegments()` directly.

**Fix**: Modified `_handleDone()` to:
1. Get textOverlays from editorState
2. If overlays exist, render them using TextOverlayRenderer
3. Apply to video using VideoExportService.applyTextOverlay()
4. Use resulting video path for the draft
