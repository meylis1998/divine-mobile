---
title: "11:32:58 PM - December 13, 2025"
date: 2025-12-13T10:32:58.650Z
timestamp: 1765621978650
---

## Project Notes

Fixed two ClipManager bugs:

1. **Segment extraction dimensions bug** - When extracting segments from macOS single recording mode, a 9:16 vertical crop filter was being applied to 16:9 landscape video, shrinking 1280x720 to 404x720. Fixed by removing the crop filter from `extractSegmentFiles()`. The crop should only be applied during final export, not during segment extraction for ClipManager preview.

   Modified `vine_recording_controller.dart` line 2491-2493:
   - Removed `-vf "$cropFilter"` from FFmpeg command
   - Segments now preserve original resolution

2. **VideoPlayerController disposed error** - When switching between clips in ClipManager, the old controller was being disposed but `_previewController` still held a reference to it. During async initialization of the new controller, if the widget rebuilt, it would try to access the disposed controller.

   Fixed in `clip_manager_screen.dart` `_loadPreview()`:
   - Store old controller reference before nulling
   - Set `_previewController = null` immediately
   - Trigger setState to show loading state
   - Then dispose old controller
   - Also added cleanup if widget unmounts during async initialization
