{
  "embedding": [
    -0.02209574170410633,
    -0.07493402808904648,
    -0.03717661276459694,
    -0.08307012170553207,
    0.04266392067074776,
    0.05428473651409149,
    0.020712440833449364,
    -0.005965253338217735,
    0.024342065677046776,
    0.04614374414086342,
    0.006206170190125704,
    0.03009985387325287,
    -0.07359583675861359,
    0.02071867510676384,
    -0.04633916914463043,
    -0.022321192547678947,
    0.0608224980533123,
    -0.04221436381340027,
    -0.05560123175382614,
    0.03535947576165199,
    -0.01283434871584177,
    -0.013827425427734852,
    0.08425678312778473,
    0.051976338028907776,
    -0.08775655925273895,
    -0.040325265377759933,
    -0.002831291640177369,
    -0.0745958536863327,
    -0.037458356469869614,
    -0.024270569905638695,
    0.08142513036727905,
    -0.01763218082487583,
    -0.04808161035180092,
    -0.06858185678720474,
    -0.034100864082574844,
    0.019858334213495255,
    -0.09447862952947617,
    -0.06626812368631363,
    -0.10537631809711456,
    -0.04891623184084892,
    0.0429697223007679,
    0.012911657802760601,
    -0.029628679156303406,
    -0.04256143793463707,
    -0.05442873761057854,
    -0.046998608857393265,
    0.016239764168858528,
    -0.06239071860909462,
    -0.007719218265265226,
    -0.015858357772231102,
    -0.06035808473825455,
    0.0563555583357811,
    -0.007499242667108774,
    -0.014209090732038021,
    0.10027284920215607,
    -0.004778177943080664,
    0.03099440224468708,
    0.04619935154914856,
    -0.02643621899187565,
    0.069743812084198,
    0.052866507321596146,
    -0.036239657551050186,
    -0.014624753035604954,
    -0.0518801212310791,
    0.008613563142716885,
    0.043580561876297,
    0.05599357932806015,
    -0.02878337912261486,
    0.03417343273758888,
    0.04090254753828049,
    -0.03755549341440201,
    0.050694581121206284,
    0.011757932603359222,
    0.023147091269493103,
    -0.039032984524965286,
    -0.005613094195723534,
    0.0461614616215229,
    -0.05138443410396576,
    -0.053233224898576736,
    -0.07277537882328033,
    -0.02101500704884529,
    -0.08427143096923828,
    0.011340751312673092,
    -0.050238560885190964,
    0.06227325648069382,
    0.013047662563621998,
    -0.01983965002000332,
    -0.07616226375102997,
    0.07506254315376282,
    0.026925642043352127,
    -0.014729578979313374,
    0.0523180216550827,
    0.07076908648014069,
    0.025902576744556427,
    0.12679995596408844,
    -0.0038816125597804785,
    0.06022162362933159,
    -0.05844283849000931,
    -0.04102392867207527,
    0.004141202662140131,
    -0.03262218087911606,
    0.003570586908608675,
    0.031080367043614388,
    0.08600013703107834,
    0.06767357885837555,
    -0.015879543498158455,
    0.0009675580658949912,
    0.01626625843346119,
    -0.03893257677555084,
    -0.025618385523557663,
    0.014371144585311413,
    0.01447927113622427,
    0.02598809450864792,
    0.02694247104227543,
    0.037439778447151184,
    0.055446404963731766,
    -0.05234250798821449,
    -0.028359882533550262,
    -0.035601165145635605,
    0.1162329614162445,
    0.07595483213663101,
    0.016934845596551895,
    0.04916219413280487,
    -0.03772946074604988,
    -0.007345089688897133,
    0.0570293627679348,
    0.039728958159685135,
    3.9872845521708765e-33,
    -0.009357651695609093,
    -0.08192389458417892,
    -0.03119003400206566,
    0.06277620792388916,
    -0.013373571448028088,
    -0.011170369572937489,
    0.02350773848593235,
    0.022237025201320648,
    0.0008153753005899489,
    -0.08357325941324234,
    0.07294254750013351,
    -0.09798189252614975,
    -0.03522577881813049,
    0.014126833528280258,
    0.029373599216341972,
    -0.07332353293895721,
    0.03944770619273186,
    -0.025252439081668854,
    0.04118310660123825,
    0.03525111824274063,
    0.09018611907958984,
    -0.011818693950772285,
    -0.06614464521408081,
    -0.053855616599321365,
    -0.02402975596487522,
    0.04216935858130455,
    -0.00756319472566247,
    0.01277260109782219,
    0.03923873230814934,
    0.02555673196911812,
    -0.028982602059841156,
    -0.015426317229866982,
    -0.017575189471244812,
    -0.04292077198624611,
    0.02567984350025654,
    0.009156860411167145,
    -0.1411336362361908,
    0.020470159128308296,
    -0.1051030158996582,
    -0.08966701477766037,
    -0.043726466596126556,
    0.03224658966064453,
    -0.12329068034887314,
    -0.005967480596154928,
    -0.019563542678952217,
    -0.12167834490537643,
    -0.05298285931348801,
    0.038143690675497055,
    -0.013411263935267925,
    0.04849384352564812,
    0.007237647194415331,
    0.04589158296585083,
    0.03210596740245819,
    -0.10354848206043243,
    -0.044371843338012695,
    0.031324516981840134,
    0.04413732886314392,
    -0.041328199207782745,
    0.004757137969136238,
    -0.039365679025650024,
    0.02877749502658844,
    -0.041908033192157745,
    -0.034787289798259735,
    -0.018851809203624725,
    -0.003084685653448105,
    0.022890489548444748,
    0.03595845773816109,
    -0.030589444562792778,
    -0.004628979135304689,
    -0.01649051532149315,
    -0.02304071933031082,
    0.03060547448694706,
    0.043436285108327866,
    -0.01848987117409706,
    -0.012661502696573734,
    0.012637677602469921,
    -0.03865382820367813,
    -0.030630270019173622,
    -0.1132616251707077,
    -0.07798296213150024,
    0.026889674365520477,
    -0.031005162745714188,
    -0.0261154193431139,
    -0.0010511381551623344,
    -0.011395556852221489,
    0.009475895203649998,
    0.023455031216144562,
    -0.03880605474114418,
    -0.04293782263994217,
    0.07132197171449661,
    0.054283615201711655,
    0.031184708699584007,
    0.08751332759857178,
    -0.020199907943606377,
    -0.03887810930609703,
    -5.3696449702447626e-33,
    0.002034093253314495,
    -0.020748382434248924,
    -0.07615570724010468,
    0.02591838873922825,
    0.0530003160238266,
    -0.06411236524581909,
    -0.044378262013196945,
    0.027485843747854233,
    0.024584177881479263,
    -0.09270057082176208,
    -0.1578603982925415,
    0.022509461268782616,
    -0.044323667883872986,
    -0.010517814196646214,
    -0.0399530753493309,
    -0.017578691244125366,
    0.03507773578166962,
    -0.045989956706762314,
    0.038403455168008804,
    -0.04280600696802139,
    0.023977093398571014,
    0.04459583759307861,
    0.04416702687740326,
    -0.030012691393494606,
    -0.07752446085214615,
    0.028666241094470024,
    0.03479870408773422,
    0.0722678080201149,
    0.03328239545226097,
    -0.06672340631484985,
    0.14896516501903534,
    -0.005620044656097889,
    0.0013533536111935973,
    0.06162811443209648,
    0.010879884473979473,
    -0.010341712273657322,
    0.0413326770067215,
    -0.03870243579149246,
    -0.10383602976799011,
    -0.05791314318776131,
    0.18709765374660492,
    0.10374385863542557,
    -0.06770313531160355,
    0.008523150347173214,
    0.04149246588349342,
    0.02815796434879303,
    0.03491608425974846,
    -0.007823902182281017,
    -0.054997287690639496,
    -0.05222168192267418,
    -0.005829340312629938,
    -0.08892428129911423,
    0.012748553417623043,
    0.0052299597300589085,
    -0.0033990510273724794,
    0.04222532734274864,
    0.10758335888385773,
    0.03391000255942345,
    0.04093054309487343,
    -0.024819180369377136,
    0.058492183685302734,
    0.012054177932441235,
    -0.06283126771450043,
    -0.008071252144873142,
    0.04646429792046547,
    0.04833933711051941,
    0.05068729817867279,
    0.05875013768672943,
    0.06500287353992462,
    -0.014012989588081837,
    0.026602106168866158,
    0.0629877969622612,
    -0.022021008655428886,
    -0.045158665627241135,
    0.029342971742153168,
    0.08928576856851578,
    -0.056506916880607605,
    -0.030679425224661827,
    0.03708575665950775,
    -0.02927560545504093,
    -0.1131594181060791,
    -0.056101247668266296,
    0.016045082360506058,
    -0.0008928393363021314,
    -0.025375662371516228,
    0.03741459921002388,
    0.04865008965134621,
    0.06035648286342621,
    0.0066412282176315784,
    0.015905195847153664,
    0.009780795313417912,
    0.017899390310049057,
    -0.01986071467399597,
    0.053169481456279755,
    0.028152022510766983,
    -5.895202548344969e-8,
    0.009034208953380585,
    0.016828976571559906,
    -0.07878633588552475,
    0.11732400953769684,
    0.015990665182471275,
    -0.07875701785087585,
    0.04312501847743988,
    -0.02867479808628559,
    0.0411364920437336,
    0.004397518001496792,
    0.017679383978247643,
    -0.051509615033864975,
    0.02794986218214035,
    -0.04411527141928673,
    0.07325953245162964,
    -0.0573478527367115,
    -0.05319324508309364,
    0.04167868569493294,
    -0.0907161757349968,
    -0.0004005457740277052,
    -0.04243922606110573,
    0.012961446307599545,
    -0.024199994280934334,
    -0.03785271570086479,
    -0.05534055829048157,
    0.007681575603783131,
    0.04321131855249405,
    0.03963765874505043,
    0.03146812319755554,
    -0.04208842292428017,
    -0.006040491629391909,
    0.012964529916644096,
    0.02922414243221283,
    -0.06273392587900162,
    -0.07720945030450821,
    0.013832652941346169,
    0.11532999575138092,
    -0.014149526134133339,
    0.11546498537063599,
    0.1105206087231636,
    -0.007204271387308836,
    0.021141940727829933,
    0.02573627606034279,
    0.0027290363796055317,
    -0.04427136480808258,
    0.02890375815331936,
    -0.07208725064992905,
    -0.027963142842054367,
    0.06726904213428497,
    0.030958890914916992,
    -0.09026768058538437,
    0.044510699808597565,
    -0.06865189969539642,
    0.048315051943063736,
    0.028387505561113358,
    -0.013448256999254227,
    0.05791068449616432,
    -0.012600462883710861,
    -0.0066227843053638935,
    -0.028614794835448265,
    0.09952802956104279,
    -0.045793455094099045,
    0.018748266622424126,
    0.07477253675460815
  ],
  "text": "**Root Cause**: Race condition in video controller lifecycle. When user scrolls quickly through feed:\n1. Provider disposal triggers `ref.onDispose()` which uses `Future.microtask` to defer native disposal\n2. But async callbacks (like `.then()` on play/pause) still hold controller references\n3. When callback executes, native AVFoundation player is already gone\n4. CRASH: \"Bad state: No active player with ID 13\"\n\n**Fix Implemented**:\n1. Added `safePlay()`, `safePause()`, `safeSeekTo()` helpers in `individual_video_providers.dart`\n2. These wrap controller operations in try-catch that detects disposal errors:\n   - \"no active player\"\n   - \"bad state\"\n   - \"disposed\"\n   - \"player with id\"\n3. Updated all play/pause calls in `video_feed_item.dart` to use safe wrappers\n4. Added `isInitialized` checks before operations\n\n**Files Modified**:\n- `lib/providers/individual_video_providers.dart` - Added safe* helper functions\n- `lib/widgets/video_feed_item.dart` - Updated all controller.play()/pause() calls\n\n**Test Coverage**:\n- Created `test/providers/safe_controller_operations_test.dart` with 14 tests\n- Tests verify: uninitialized handling, success cases, disposal error catching, error rethrow",
  "sections": [
    "Project Notes",
    "Video Player Crash Fix - \"No active player with ID\""
  ],
  "timestamp": 1765478009566,
  "path": "/Users/rabble/code/andotherstuff/openvine/mobile/.private-journal/2025-12-12/07-33-29-566817.md"
}