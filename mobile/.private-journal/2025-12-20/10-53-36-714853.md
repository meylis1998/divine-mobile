---
title: "10:53:36 AM - December 20, 2025"
date: 2025-12-19T21:53:36.714Z
timestamp: 1766181216714
---

## Project Notes

**CameraPreviewHolder solution** - December 20, 2025

Found the right solution for the CamerAwesome issues!

**The problem with caching at interface level:**
When we cached `_cachedPreviewWidget` in the camera interface, the `builder` callback kept updating `_cameraState` to new state objects. But recording was started on an older state object. Calling `stopRecording()` on the wrong state object hangs.

**The problem without caching:**
Every parent rebuild called `previewWidget` getter, creating a new CameraAwesomeBuilder. During rebuild transitions, multiple instances with conflicting GlobalKeys existed in the tree.

**The solution - CameraPreviewHolder StatefulWidget:**
Wrap the camera preview in a StatefulWidget that captures `previewWidget` once in `initState`. This:
1. Prevents duplicate widgets (captured once, held stable)
2. Lets CamerAwesome manage its own internal state (we're not caching at interface level)
3. The widget's lifecycle is tied to the camera screen's lifecycle

The key insight: **WHERE** you cache matters. Caching in the interface broke state management. Caching in the widget tree (via StatefulWidget initState) works because the widget's lifecycle is properly managed.
