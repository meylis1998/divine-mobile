---
title: "10:42:00 AM - December 20, 2025"
date: 2025-12-19T21:42:00.002Z
timestamp: 1766180520002
---

## Project Notes

**CamerAwesome GlobalKey fix - root cause analysis** - December 20, 2025

The real bug was that `previewWidget` getter returned a new `CameraAwesomeBuilder.custom()` on EVERY call. Since the camera screen rebuilds frequently due to:
- `ref.watch(vineRecordingProvider)` 
- `setState()` for orientation tracking
- `setState()` after camera switch
- Various other state changes

Each rebuild called `previewWidget` getter again, creating a NEW CameraAwesomeBuilder. CamerAwesome's internal `PreviewFitWidget` creates GlobalKeys, and having multiple instances briefly in the tree during rebuilds caused "Duplicate GlobalKey detected" errors.

**Fix**: Cache the CameraAwesomeBuilder widget instance using `??=` operator so the same widget is returned on every call. Clear the cache in `dispose()` to allow fresh creation on reinit.

This is a pattern issue that could affect any widget getter that returns new widget instances - the solution is to cache widgets that have internal GlobalKey dependencies.
