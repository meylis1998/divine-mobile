---
title: "10:49:24 AM - December 20, 2025"
date: 2025-12-19T21:49:24.320Z
timestamp: 1766180964320
---

## Project Notes

**CamerAwesome widget caching caused recording hang** - December 20, 2025

The widget caching I added to prevent GlobalKey errors actually caused a worse problem: `state.stopRecording()` would hang on the FIRST recording attempt and never return.

**What the logs showed:**
- First recording: start succeeds, stop hangs indefinitely, state machine gets confused
- Second recording (after leaving and coming back): works perfectly

The difference was that on the second attempt, `dispose()` cleared the cached widget, so a FRESH CameraAwesomeBuilder was created. Fresh widgets work; cached widgets don't.

**Root cause hypothesis:**
CamerAwesome's internal state management expects the widget to be recreated on rebuilds. When we cache it, the internal state machine gets confused and `stopRecording()` hangs.

**Current state:**
Removed the caching. Now need to see if the original GlobalKey issue was real or coincidental. If GlobalKey errors do occur, we'll need a different approach - perhaps a StatefulWidget wrapper that controls widget lifecycle more carefully.
