---
title: "1:31:15 PM - December 20, 2025"
date: 2025-12-20T00:31:15.532Z
timestamp: 1766190675532
---

## Project Notes

**macOS FFmpegKit UI Hang Fix - December 2025**

**Problem**: After running multiple FFmpeg operations (crop each clip + concat), navigation from ClipManagerScreen to VideoEditorScreen hangs on macOS. The navigation observer fires but the screen never builds.

**Root Cause Analysis**:
- Single clip with NO FFmpeg: WORKS
- Single clip with FFmpeg crop: WORKS  
- Multiple clips with FFmpeg (5 crops + concat): HANGS on macOS, works on iOS

**Hypothesis**: h264_videotoolbox (VideoToolbox) on macOS creates GPU contexts that accumulate when running many sequential encode operations. This blocks Flutter's rendering pipeline.

**Solution Applied**:
1. Use libx264 (software encoding) on macOS for multi-clip crop operations
2. Add explicit `FFmpegEncoder.clearSessions()` after each crop to release resources

**Key Code Location**: `lib/services/video_export_service.dart` lines 178-215

**Testing Needed**: Verify multi-clip navigation works on macOS after the fix.
