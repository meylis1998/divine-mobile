---
title: "4:45:00 PM - December 9, 2025"
date: 2025-12-09T03:45:00.904Z
timestamp: 1765251900904
---

## Project Notes

Blossom 404 debugging findings:

1. Streaming hash computation verified working - client hash matches buffered hash
2. Server at separately-robust-roughy.edgecompute.app returns 500 on upload (test used dummy auth keys)
3. The fix I added:
   - Added hash verification logging to compare client vs server hash
   - Changed videoId to use server's authoritative hash (serverHash ?? fileHash)
   - If there's a hash mismatch, it will now be logged with "ðŸš¨ HASH MISMATCH DETECTED!"

4. Root cause theory: For large files (>500KB), Cloud Run proxy computes its own SHA256. If streaming upload causes different bytes to arrive, hashes differ. Server URL uses server's hash, but client was storing client's hash as videoId.

5. The fix ensures the client uses the server's returned sha256 as the authoritative source, which should prevent 404s from hash mismatches.

6. Additional changes in diff:
   - Default server URL changed from blossom.divine.video to media.divine.video
   - Enhanced error handling for DioException with specific HTTP status codes (502, 503, 504)
   - Better error message formatting
