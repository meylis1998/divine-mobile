{
  "embedding": [
    -0.025241687893867493,
    -0.02426934987306595,
    -0.04961111769080162,
    0.040990233421325684,
    0.07261517643928528,
    -0.04034462943673134,
    -0.04317990317940712,
    -0.0010887598618865013,
    0.004121747799217701,
    0.028144290670752525,
    0.07626554369926453,
    -0.02027086727321148,
    0.03988759219646454,
    -0.05936172977089882,
    -0.013637108728289604,
    0.065775066614151,
    -0.03288331627845764,
    -0.05804932489991188,
    -0.0010051933350041509,
    0.04260529205203056,
    -0.11226701736450195,
    -0.038796402513980865,
    -0.09242920577526093,
    0.010030091740190983,
    0.025518473237752914,
    -0.052902743220329285,
    -0.01616494171321392,
    0.0068780286237597466,
    -0.01914166286587715,
    0.01740960404276848,
    -0.07775072008371353,
    0.056540314108133316,
    -0.21287451684474945,
    0.059575680643320084,
    0.05250196158885956,
    0.020379414781928062,
    0.02748819626867771,
    -0.015377162955701351,
    -0.03023841790854931,
    -0.040611449629068375,
    0.11451022326946259,
    -0.12267842888832092,
    -0.01829456351697445,
    0.08427184820175171,
    -0.018363751471042633,
    -0.0018185017397627234,
    -0.043576184660196304,
    -0.038873832672834396,
    -0.058522578328847885,
    0.05028054490685463,
    -0.05762990936636925,
    0.05651906132698059,
    0.01143775787204504,
    0.04570498690009117,
    0.09342332184314728,
    0.08100391924381256,
    -0.027321072295308113,
    -0.029916027560830116,
    0.029863422736525536,
    0.03243023529648781,
    -0.005987771786749363,
    0.042283833026885986,
    0.020774204283952713,
    -0.03631407395005226,
    -0.08976606279611588,
    -0.0012660823995247483,
    0.00700307497754693,
    0.014067115262150764,
    0.13976764678955078,
    0.05845274031162262,
    -0.036069296300411224,
    0.06290245801210403,
    -0.10580737888813019,
    -0.00865248218178749,
    -0.05388425663113594,
    -0.006194801069796085,
    -0.03368609398603439,
    0.03645891696214676,
    -0.028793932870030403,
    -0.10486236214637756,
    -0.034029971808195114,
    0.01072431169450283,
    -0.02397800236940384,
    -0.04399355873465538,
    -0.011810731142759323,
    -0.02772287279367447,
    -0.0334942489862442,
    -0.011138695292174816,
    -0.02346496656537056,
    0.010774760507047176,
    0.032567884773015976,
    -0.016535116359591484,
    0.026275837793946266,
    -0.017197102308273315,
    -0.04829403758049011,
    0.007719574961811304,
    0.016529161483049393,
    -0.018996182829141617,
    0.032041069120168686,
    0.018149958923459053,
    -0.0315806083381176,
    0.004723774269223213,
    -0.10366832464933395,
    0.11751539260149002,
    -0.0410684272646904,
    -0.04634669050574303,
    -0.04331395775079727,
    -0.005492405965924263,
    -0.09010840952396393,
    0.0472504161298275,
    0.011816614307463169,
    0.03277580812573433,
    -0.00739307003095746,
    -0.14993718266487122,
    -0.05546388402581215,
    0.10362516343593597,
    -0.10755389928817749,
    -0.022279782220721245,
    -0.010908304713666439,
    0.03409937396645546,
    -0.011178988963365555,
    0.049713484942913055,
    -0.01702258549630642,
    0.02444683387875557,
    -0.041731782257556915,
    0.07264014333486557,
    0.09431993216276169,
    4.202772503143772e-33,
    0.007357580587267876,
    -0.05407888442277908,
    -0.030955040827393532,
    -0.024459896609187126,
    0.00910054612904787,
    0.07116755098104477,
    -0.009494515135884285,
    -0.01733730174601078,
    0.029634449630975723,
    0.026208441704511642,
    -0.044229138642549515,
    -0.024668388068675995,
    -0.10026926547288895,
    -0.08472555130720139,
    0.09177298843860626,
    -0.006192115135490894,
    0.04331152141094208,
    -0.00889922957867384,
    0.07717874646186829,
    -0.028923261910676956,
    0.06528319418430328,
    0.0013041121419519186,
    -0.0386611707508564,
    0.0073019517585635185,
    0.04152485728263855,
    0.04742950573563576,
    -0.018483294174075127,
    -0.049705859273672104,
    0.03665221482515335,
    0.051913026720285416,
    -0.043261587619781494,
    0.018341485410928726,
    -0.012830065563321114,
    0.024051491171121597,
    -0.04606226831674576,
    0.034914761781692505,
    -0.0684339702129364,
    -0.013403131626546383,
    0.04382043331861496,
    -0.00864524394273758,
    -0.0038806318771094084,
    0.01484354306012392,
    -0.1021752655506134,
    -0.0615919753909111,
    0.05960233882069588,
    -0.02223733812570572,
    0.07445473968982697,
    0.04977121576666832,
    0.04827713966369629,
    -0.11297255754470825,
    0.025883778929710388,
    -0.015579159371554852,
    0.03155600652098656,
    0.04905371740460396,
    0.048521239310503006,
    -0.057791635394096375,
    0.006064091809093952,
    -0.02431464195251465,
    0.06184074282646179,
    0.013312033377587795,
    0.009181477129459381,
    -0.04206905886530876,
    0.017522312700748444,
    -0.018454715609550476,
    0.0744454488158226,
    0.08834077417850494,
    -0.06271153688430786,
    -0.03951515257358551,
    0.025031866505742073,
    -0.03845760226249695,
    0.018674146384000778,
    0.010533937253057957,
    -0.020141204819083214,
    0.02222859114408493,
    -0.02389475703239441,
    -0.04834253340959549,
    -0.02783855050802231,
    -0.02705521136522293,
    0.02699987217783928,
    -0.006226983852684498,
    0.07528411597013474,
    0.008923028595745564,
    -0.08577798306941986,
    -0.0017480700043961406,
    -0.03258688002824783,
    -0.05790262296795845,
    -0.03670940920710564,
    0.016478631645441055,
    -0.179340660572052,
    0.009531526826322079,
    0.08855970203876495,
    -0.051401641219854355,
    0.0875159502029419,
    -0.010717994533479214,
    -0.02165304124355316,
    -7.00370407542664e-33,
    0.017228618264198303,
    0.010242064483463764,
    0.02115614339709282,
    0.034066613763570786,
    0.05438432842493057,
    -0.045410506427288055,
    -0.04884796589612961,
    0.016395002603530884,
    -0.033651284873485565,
    0.04351379722356796,
    -0.08020006120204926,
    -0.01540052518248558,
    0.03593911975622177,
    -0.06594940274953842,
    -0.01819579489529133,
    0.022046193480491638,
    -0.05506009981036186,
    0.004717962816357613,
    -0.018473904579877853,
    -0.0008105532033368945,
    0.009095665998756886,
    0.1286117285490036,
    -0.06796924024820328,
    0.05922343209385872,
    0.04218883439898491,
    -0.017263639718294144,
    0.03302312269806862,
    -0.0022962428629398346,
    -0.07726109027862549,
    -0.046033624559640884,
    -0.02641967684030533,
    -0.05420783534646034,
    -0.015200871974229813,
    0.021220695227384567,
    0.02712087333202362,
    -0.006361266598105431,
    0.04255808889865875,
    0.027847126126289368,
    -0.0002648986701387912,
    -0.017241625115275383,
    0.04346843063831329,
    0.02160988561809063,
    -0.032751984894275665,
    0.022636961191892624,
    0.0069563440047204494,
    0.11892228573560715,
    -0.06083976477384567,
    0.012402615509927273,
    0.0343337245285511,
    0.006449128966778517,
    0.0030451759230345488,
    -0.031253378838300705,
    0.05284897983074188,
    -0.012422548606991768,
    0.02883249893784523,
    -0.007270754314959049,
    0.03988770395517349,
    0.01046040840446949,
    -0.045203354209661484,
    -0.0524473674595356,
    0.06295959651470184,
    -0.019164707511663437,
    0.041933927685022354,
    0.0673832818865776,
    0.0267898291349411,
    -0.013152344152331352,
    -0.013299425132572651,
    0.04292388632893562,
    -0.00680875638499856,
    -0.06956648081541061,
    0.043660882860422134,
    0.05019894614815712,
    -0.11606191098690033,
    0.00983039103448391,
    0.053458210080862045,
    0.006451885681599379,
    0.011287828907370567,
    0.0051381150260567665,
    0.015180769376456738,
    -0.017635256052017212,
    -0.16470323503017426,
    -0.03510395064949989,
    0.07816258817911148,
    -0.04212862625718117,
    -0.02052984945476055,
    -0.021664610132575035,
    0.03721270710229874,
    0.036756519228219986,
    0.028175655752420425,
    0.07151824235916138,
    -0.12035716325044632,
    -0.04524429142475128,
    -0.08941392600536346,
    0.005655103363096714,
    -0.008362287655472755,
    -4.8251852291514297e-8,
    0.006179016083478928,
    0.039017029106616974,
    -0.023246362805366516,
    -0.0016589477891102433,
    0.08463074266910553,
    -0.05675400793552399,
    0.03465455025434494,
    0.057302240282297134,
    0.045766476541757584,
    0.005299525335431099,
    -0.0005426101270131767,
    0.10118670761585236,
    0.0021936772391200066,
    -0.042055729776620865,
    -0.04355042800307274,
    -0.016466211527585983,
    0.04497713968157768,
    -0.03521040081977844,
    -0.0484437458217144,
    -0.029773658141493797,
    0.004784877877682447,
    0.05480433255434036,
    0.02351924031972885,
    -0.02318117395043373,
    -0.034049469977617264,
    0.024189626798033714,
    0.01827363111078739,
    0.09192658960819244,
    0.1167026087641716,
    -0.017430724576115608,
    -0.011146917939186096,
    -0.08728931099176407,
    0.06064301356673241,
    0.01908663660287857,
    -0.06609038263559341,
    0.09121160954236984,
    0.024531425908207893,
    0.016904344782233238,
    -0.02667425572872162,
    -0.006902681663632393,
    -0.019822685047984123,
    0.015483304858207703,
    -0.046039141714572906,
    0.018880922347307205,
    -0.05556372180581093,
    -0.02165231853723526,
    -0.0459093376994133,
    0.0449189618229866,
    -0.04218915104866028,
    0.03870216757059097,
    -0.055324431508779526,
    -0.06433973461389542,
    -0.06775788217782974,
    0.057610929012298584,
    0.020932627841830254,
    0.012566573917865753,
    -0.021656759083271027,
    0.05842560529708862,
    0.13598205149173737,
    -0.011458228342235088,
    0.024227753281593323,
    -0.004391000606119633,
    -0.05213123932480812,
    0.03301352262496948
  ],
  "text": "**Critical Database Migration Pattern Discovered**\n\nThe `event` table is created by nostr_sdk (embedded relay) but db_client extends it with additional columns like `expire_at`. This creates a tricky migration scenario:\n\n1. nostr_sdk creates `event` table WITHOUT `expire_at`\n2. db_client's Drift definition EXPECTS `expire_at`\n3. Standard Drift migrations don't work because nostr_sdk controls table creation\n\n**Solution**: Added `_ensureEventTableColumns()` that:\n- Runs in `beforeOpen` before any cleanup\n- Uses `PRAGMA table_info(event)` to check column existence\n- Adds missing columns via `ALTER TABLE event ADD COLUMN`\n- Creates associated indexes\n\nThis pattern will be needed for any future columns db_client needs on shared tables.",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1766115104514,
  "path": "/Users/rabble/code/andotherstuff/openvine/mobile/.private-journal/2025-12-19/16-31-44-514659.md"
}