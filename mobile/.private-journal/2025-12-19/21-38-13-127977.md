---
title: "9:38:13 PM - December 19, 2025"
date: 2025-12-19T08:38:13.127Z
timestamp: 1766133493127
---

## Project Notes

## Sound Tags for Video Events - Complete Implementation

Successfully implemented the sound tagging feature for diVine video events:

### Architecture Decisions
- Used content-addressable hashing (SHA256) for sounds - same as Blossom protocol
- Sound tags follow format: `["sound", "<sha256-hash>", "<url>", "<title>"]`
- Hash computed on-demand to avoid precomputing for all 31 bundled sounds
- Hash cached after first computation per session

### Files Modified
1. `lib/models/vine_sound.dart` - Added sha256, blossomUrl fields
2. `lib/services/sound_library_service.dart` - Added hash computation & audio bytes methods
3. `lib/services/blossom_upload_service.dart` - Added uploadAudio() method
4. `lib/models/vine_draft.dart` - Added soundId field
5. `lib/screens/video_editor_screen.dart` - Pass soundId to draft
6. `lib/services/video_event_publisher.dart` - Accept and add sound tags
7. `lib/screens/pure/video_metadata_screen_pure.dart` - Handle sound upload during publish
8. `docs/PROPOSED_NIP_SOUND_TAG.md` - NIP proposal

### Key Implementation Details
- Avoided modifying PendingUpload (Hive model) by passing sound params separately to publisher
- Sound upload happens during publish, not during draft creation (lazy upload)
- Graceful degradation - if sound upload fails, video still publishes without sound tag

### Future Considerations
- Could cache sound URLs after successful upload to avoid re-uploading same sound
- Consider precomputing hashes for bundled sounds at build time
- May need to add sound-based video discovery UI
