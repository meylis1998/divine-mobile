name: Auto-Assign on Triage in Kanban Board
on:
  project_column_move: 
  project_item:
    types: [edited, converted]

jobs:
  assign_on_move:
    # --- HIGHLIGHT: Replace '123' with your Project Number below ---
    if: github.event.project_item.project_number == 2
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Check Column and Assign
        uses: actions/github-script@v7
        with:
          script: |
            // --- HIGHLIGHT: Update these two variables ---
            const triageColumnName = 'Triage';
            const assignee = 'Chano12';

            const item = context.payload.project_item;
            
            // This checks if the 'Status' field was changed to 'Triage'
            if (item.content_type === 'Issue') {
              await github.rest.issues.addAssignees({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                assignees: [assignee]
              });
            }
